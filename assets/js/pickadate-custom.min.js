!function(e){e(document).ready(function(){function t(e,t){var i=a(e);t>0?(endFirstDay=parseInt(i)+parseInt(t),"days"===c&&(endFirstDay-=1)):endFirstDay="nights"===c?parseInt(i)+1:i,0>=i&&(i=!0),endFirstDay<=0&&(endFirstDay=!0),pickerStart.set("min",i,{muted:!0}),pickerEnd.set("min",endFirstDay,{muted:!0})}function a(e){var t=+e;return t}$input=e(".datepicker").pickadate({close:"",formatSubmit:"yyyy-mm-dd"}),$inputStart=e(".datepicker_start").pickadate(),$inputEnd=e(".datepicker_end").pickadate(),picker=$input.pickadate("picker"),pickerStart=$inputStart.pickadate("picker"),pickerEnd=$inputEnd.pickadate("picker");var i,r,n=ajax_object.product_type,c=ajax_object.calc_mode;if("simple"===n){{var r=ajax_object.first_date,i=ajax_object.min;ajax_object.max}t(r,i)}if("variable"===n){var s=e(".wceb_picker_wrap");s.hide(),e("body").on("found_variation",".variations_form",function(e,a){a.is_purchasable&&a.is_in_stock&&a.variation_is_visible&&a.is_bookable?(s.slideDown(200),pickerStart.clear(),pickerEnd.clear(),variationId=a.variation_id,r=ajax_object.first_date[variationId],i=ajax_object.min[variationId],t(r)):s.hide()}),e("body").on("reset_image",".variations_form",function(){s.hide()})}ebs_clear_booking_session=function(){var t={action:"clear_booking_session"};e.post(ajax_object.ajax_url,t)},ebs_get_min_and_max=function(t,i){var c=new Date(t.year,t.month,t.date),s=new Date(t.year,t.month,t.date);if("variable"===n)var o=e(".variations_form").find("input.variation_id").val(),d=parseInt(ajax_object.min[o]),p=parseInt(ajax_object.max[o]);else var d=parseInt(ajax_object.min),p=parseInt(ajax_object.max);var m=ajax_object.calc_mode;"plus"===i?(0==d?"nights"===m&&(d+=1):"days"===m&&(d-=1),0==p&&(p-=1),"days"===m&&(p-=1)):0==p?(c=new Date,0!=d&&(p=d,p-=1),d=1,"nights"===m&&(d-=1,p+=1)):(temp=d,d=p,p=temp,0!=temp&&(p-=1),"days"===m?d-=1:p+=1),"plus"===i?(c.setDate(c.getDate()+d),s.setDate(s.getDate()+p)):(c.setDate(c.getDate()-d),s.setDate(s.getDate()-p));var _=new Date,l=a(r);0!=l&&_.setDate(_.getDate()+l),_>c&&(c=_),0>p&&(s=!1);var u={};return u.min=c,u.max=s,u},ebs_set_price=function(t,a,i,r){product_id="variable"===n?e("input[name=product_id]").val():e("input[name=add-to-cart]").val(),variation_id=e(".variations_form").find("input.variation_id").val();{var c={action:"add_new_price",product_id:product_id,variation_id:variation_id,start:i,end:r,start_format:t,end_format:a};window.location.toString()}e("form.cart").fadeTo("400","0.6").block({message:null,overlayCSS:{background:"transparent",backgroundSize:"16px 16px",opacity:.6}}),e.post(ajax_object.ajax_url,c,function(t){e(".woocommerce-error, .woocommerce-message").remove(),fragments=t.fragments,errors=t.errors,errors&&e.each(errors,function(t,a){e(t).replaceWith(a)}),fragments&&e.each(fragments,function(t,a){e(t).replaceWith(a)}),e("form.cart").trigger("update_price",[c,t]),e("form.cart").stop(!0).css("opacity","1").unblock()})},pickerStart.on({set:function(e){if("undefined"!=typeof e.clear&&null==e.clear){var t=a(r)+parseInt(i);0===t&&(t=!0),"nights"===c&&0===i&&1!=t&&(t+=1),"days"===c&&i>0&&1!=t&&(t-=1),pickerEnd.set({disable:!1,min:t,max:!1,highlight:new Date},{muted:!0}),startPick=void 0,ebs_clear_booking_session()}if(!e.select||"undefined"==typeof e.select)return!1;startPick=e.select,startDate=pickerStart.get("select","yyyy-mm-dd");var n=pickerStart.get("select");startDateDisplay=pickerStart.get("select","dd mmmm yyyy"),"object"==typeof startPick&&(startPick=e.select.pick);var s=ebs_get_min_and_max(n,"plus"),o=s.min,d=s.max;pickerEnd.set({min:o,max:d,highlight:o},{muted:!0}),"undefined"!=typeof startPick&&"undefined"!=typeof endPick&&ebs_set_price(startDate,endDate,startDateDisplay,endDateDisplay)}}),pickerEnd.on({set:function(e){if("undefined"!=typeof e.clear&&null==e.clear){var t=a(r);0===t&&(t=!0),pickerStart.set({disable:!1,min:t,max:!1,highlight:new Date},{muted:!0}),endPick=void 0,ebs_clear_booking_session()}if(!e.select||"undefined"==typeof e.select)return!1;endPick=e.select,endDate=pickerEnd.get("select","yyyy-mm-dd");var i=pickerEnd.get("select");endDateDisplay=pickerEnd.get("select","dd mmmm yyyy"),"object"==typeof endPick&&(endPick=e.select.pick);var n=ebs_get_min_and_max(i,"minus"),c=n.min,s=n.max;pickerStart.set({min:c,max:s,highlight:c},{muted:!0}),"undefined"!=typeof startPick&&"undefined"!=typeof endPick&&ebs_set_price(startDate,endDate,startDateDisplay,endDateDisplay)}})})}(jQuery);